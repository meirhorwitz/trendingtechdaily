function initializeAuth(){if(!firebase.apps.length)return void console.error("Firebase has not been initialized. Auth functions may not work.");const auth=firebase.auth(),loginLink=document.getElementById("auth-login-link"),signupLink=document.getElementById("auth-signup-link"),profileMenu=document.getElementById("auth-profile-menu"),logoutBtn=document.getElementById("auth-logout-btn"),userDisplayNameNav=document.getElementById("user-display-name-nav"),userProfilePicNav=document.getElementById("user-profile-pic-nav"),userNameNav=document.getElementById("user-name-nav"),userIconNav=document.getElementById("user-icon-nav"),userProfilePicDropdown=document.getElementById("user-profile-pic-dropdown"),userEmailNav=document.getElementById("user-email-nav");auth.onAuthStateChanged(function(user){if(user){loginLink&&(loginLink.style.display="none"),signupLink&&(signupLink.style.display="none"),profileMenu&&(profileMenu.style.display="block");const displayName=user.displayName||user.email||"User";userDisplayNameNav&&(userDisplayNameNav.textContent=displayName),userNameNav&&(userNameNav.textContent=displayName,userNameNav.classList.remove("d-none")),userProfilePicNav&&(userProfilePicNav.src=user.photoURL||"/img/default-avatar.png",userProfilePicNav.style.display="block"),userProfilePicDropdown&&(userProfilePicDropdown.src=user.photoURL||"/img/default-avatar.png"),userEmailNav&&(userEmailNav.textContent=user.email||""),userIconNav&&(userIconNav.style.display="none"),console.log("User is signed in:",user.uid)}else loginLink&&(loginLink.style.display="block"),signupLink&&(signupLink.style.display="block"),profileMenu&&(profileMenu.style.display="none"),userNameNav&&(userNameNav.textContent="Login",userNameNav.classList.remove("d-none")),userProfilePicNav&&(userProfilePicNav.style.display="none"),userProfilePicDropdown&&(userProfilePicDropdown.src="/img/default-avatar.png"),userEmailNav&&(userEmailNav.textContent="email@example.com"),userIconNav&&(userIconNav.style.display="inline-block"),console.log("User is signed out.")}),logoutBtn&&logoutBtn.addEventListener("click",function(){auth.signOut().then(function(){console.log("User signed out successfully."),window.location.href="/"}).catch(function(error){console.error("Error signing out:",error),alert("Error signing out: "+error.message)})})}window.initializeAuth=initializeAuth,"loading"===document.readyState?document.addEventListener("DOMContentLoaded",initializeAuth):initializeAuth();
